<extend name="MobilePublic/base"/>

<block name="header">
    <include file="myinfomodal"/>

    <div class="modal" id="parentModal" tabindex="-1" role="dialog" aria-hidden="true">
        <div class="modal-dialog modal-sm">
            <div class="modal-content">
                <div class="modal-body">
                    <p class="h3">请让需要添加的家庭成员在微信中绑定该家庭的学生，并输入密钥 <span>4687</span></p>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-primary btn-block" data-dismiss="modal">确 定</button>
                </div>
            </div>
        </div>
    </div>
</block>

<block name="style">
    <link href="__STATIC__/font-awesome/css/font-awesome.min.css" rel="stylesheet">
    <link href="__CSS__/mobile/myinfo.css?v={:SITE_VERSION}" rel="stylesheet">
</block>

<block name="content">
    <div class="container-fluid">
    <div class="row">
    <div class="col-xs-12">
        <div class="section">
            <div class="title">
                <span>我的信息</span>
            </div>
            <div class="content">
                <div class="list-group">
                    <div class="list-group-item">
                        <p>姓名<span class="pull-right">李忠胜</span></p>
                    </div>
                    <a class="list-group-item">
                        <p>手机<span class="pull-right">1346578454</span></p>
                    </a>
                </div>
            </div>
        </div>
        <div class="section">
            <div class="title">
                我管理的家庭
                <a class="pull-right" id="manager" data-state=false href="javascript:;"><i class="fa fa-cog fa-fw"></i> <span>管理</span></a>
            </div>
            <div class="content">
                <div class="heading">
                    孩子
                    <a class="pull-right" href="{:U('test/login')}">
                        <span class="glyphicon glyphicon-plus"></span> 添加
                    </a>
                </div>
                <div class="list-group">
                    <div class="list-group-item">
                        <p>李小明<span class="pull-right">学号：5464578454</span></p>
                    </div>
                    <div class="list-group-item">
                        <p>李二明<span class="pull-right">学号：5464578455</span></p>
                    </div>
                </div>

                <div class="heading">
                    <span>家长</span>
                    <a class="pull-right" data-toggle="modal" href="#parentModal"><span class="glyphicon glyphicon-plus"></span> 添加</a>
                </div>
                <div class="list-group" id="parentList">
                    <div class="list-group-item">
                        <p>李忠胜
                            <span class="pull-right">父亲 <i class="hidden fa fa-remove fa-lg fa-fw text-danger" data-toggle="modal" data-target="#myModal" data-info-name="李忠胜" data-info-relation="父亲" data-info-manager=true data-submit-param="id=32"></i></span>
                        </p>
                    </div>
                    <div class="list-group-item">
                        <p>谢姗姗
                            <span class="pull-right">母亲 <i class="hidden fa fa-remove fa-lg fa-fw text-danger" data-toggle="modal" data-target="#myModal" data-info-name="谢姗姗" data-info-relation="母亲" data-info-manager=false data-submit-param="id=33"></i></span>
                        </p>
                    </div>
                    <div class="list-group-item">
                        <p>李国名
                            <span class="pull-right">爷爷 <i class="hidden fa fa-remove fa-lg fa-fw text-danger" data-toggle="modal" data-target="#myModal" data-info-name="李国名" data-info-relation="爷爷" data-info-manager=false data-submit-param="id=34"></i></span>
                        </p>
                    </div>
                </div>
            </div>
        </div>
    </div>
    </div>
    </div>
</block>

<block name="script">
    <script>
    $(function(){
        $("#manager").click(function(event) {
            var state = $(this).data('state');
            if (state === true) {
                // 已经激活
                $("i", this).removeClass('fa-spin');
                $("span", this).html("管理");
                $("i", "#parentList").addClass("hidden");
                $(this).data('state', false);
            } else {
                // 未激活
                $("i", this).addClass('fa-spin');
                $("span", this).html("退出管理");
                $("i", "#parentList").removeClass("hidden");
                $(this).data('state', true);
            }
        });
    });
    </script>
</block>
